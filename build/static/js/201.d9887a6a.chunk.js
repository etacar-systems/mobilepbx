"use strict";(self.webpackChunkmobiililinja=self.webpackChunkmobiililinja||[]).push([[201],{84201:(e,l,t)=>{t.r(l),t.d(l,{default:()=>I});var a,s,n,i=t(65043),r=t(55211),d=t(64196),o=t(5328),c=t(67909),h=t(14410),m=t(39477);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var t=arguments[l];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},u.apply(null,arguments)}function x(e,l){let{title:t,titleId:r,...d}=e;return i.createElement("svg",u({viewBox:"-0.5 0 8 8",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"#000000",ref:l,"aria-labelledby":r},d),t?i.createElement("title",{id:r},t):null,a||(a=i.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:0})),s||(s=i.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"})),n||(n=i.createElement("g",{id:"SVGRepo_iconCarrier"},i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Dribbble-Light-Preview",transform:"translate(-427.000000, -3765.000000)",fill:"var(--main-btninfo-color)"},i.createElement("g",{id:"icons",transform:"translate(56.000000, 160.000000)"},i.createElement("polygon",{id:"play-[#fff1001]",points:"371 3605 371 3613 378 3609"})))))))}const b=i.forwardRef(x);t.p;var v=t(1880),g=t(28600),j=t(83003),p=t(25457),w=t(93488),y=t(25284),f=t(98775),N=t(74117),_=t(70579);const C=e=>{let{show:l,onHide:t,recordingUrl:a,callerid:s,callername:n,createdat:i}=e;const{t:r}=(0,N.Bd)();return(0,_.jsxs)(y.A,{show:l,onHide:t,size:"lg",children:[(0,_.jsxs)(y.A.Header,{className:"rec-modal",style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[(0,_.jsx)(y.A.Title,{className:"delete-modal",children:r("Call recording")}),(0,_.jsx)(f.h,{height:23,width:23,onClick:t})]}),(0,_.jsx)(y.A.Body,{className:"rec-modal",children:(0,_.jsx)("div",{className:"row clearfix",children:(0,_.jsx)("div",{className:"col-md-12",children:(0,_.jsx)("div",{className:"body demo-card",children:(0,_.jsxs)("div",{className:"row clearfix",children:[(0,_.jsxs)("div",{className:"col-lg-12 col-md-12",children:[(0,_.jsxs)("label",{className:"listner-modal-text2",children:[s," ",n]}),(0,_.jsx)("br",{}),(0,_.jsx)("label",{style:{color:"var(--main-adminheaderpage-color)"},children:i}),(0,_.jsxs)("div",{className:"form-group new-audio",children:[(0,_.jsx)("div",{className:"container-audio new-audio-listner2",children:(0,_.jsxs)("audio",{src:a,controls:!0,loop:!0,className:"audio-data",children:[(0,_.jsx)("source",{src:"",type:"audio/wav"}),r("Your browser does not support the audio tag.")]})}),(0,_.jsx)("textarea",{name:"",placeholder:r("Speech to text"),id:"",style:{width:"100%",padding:"6px 12px",height:"100px",borderColor:"var(--main-bordermodaldashboard-color)"},className:"search-bg textcall"})]})]}),(0,_.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,_.jsx)("div",{className:"modal-footer",children:(0,_.jsx)("button",{className:"mb-2 btn_cancel",onClick:t,"aria-label":"Close",children:r("Cancel")})})})]})})})})})]})};var S=t(86054),A=t(73781),k=t(76181),D=t(22030);const I=function(e){let{activeKey:l,handleSort:t,tableHight:a,paginatedData:s,handleSelect:n,startdate:u,enddate:x,filter:y}=e,f=v.A.get("role");const{t:I}=(0,N.Bd)(),[L,R]=(0,i.useState)([]),E=v.A.get("Token"),P=(0,i.useRef)(null),T=(0,j.wA)(),K=u&&new Date(u).toLocaleDateString("en-CA"),H=x&&new Date(x).toLocaleDateString("en-CA"),[V,B]=(0,i.useState)(""),[G,O]=(0,i.useState)(!0),[W,M]=(0,i.useState)(10),[$,z]=(0,i.useState)(""),[F,U]=(0,i.useState)(1),[Y,X]=(0,i.useState)(!1),[Z,q]=(0,i.useState)(""),[J,Q]=(0,i.useState)(""),[ee,le]=(0,i.useState)(""),[te,ae]=(0,i.useState)(""),[se,ne]=(0,i.useState)(0),[ie,re]=(0,i.useState)(null),[de,oe]=(0,i.useState)(""),[ce,he]=(0,i.useState)(),me=e=>{re((l=>l===e?null:e))};(0,i.useEffect)((()=>{l&&("logsextension"===l?ne(3):"logsgroup"===l?ne(2):"logs"===l&&ne(0),B(""),U(1),M(10))}),[l]);const[ue,xe]=(0,i.useState)(!0),be=()=>{xe(!ue)},ve=v.A.get("User_id"),[ge,je]=(0,i.useState)(!1),[pe,we]=(0,i.useState)([]),ye=v.A.get("Company_Id");(0,i.useEffect)((()=>{je(!0),P.current&&P.current.abort();const e=new AbortController;P.current=e;const l={internal_calls:ue,search:V,size:W,direction:de,start_date:K,end_date:H,page:F,cid:ye,select_type:se,...ve?{extension_id:ve}:{}};T((0,p.wn)({inputData:l,Api:w.A.CDR.CDR_DOMAIN_LIST_LIST,Token:E,urlof:w.A.CDR.CDR_DOMAIN_LIST_LIST,signal:e.signal})).then((e=>{var l;if("Rejected"==(null===e||void 0===e||null===(l=e.error)||void 0===l?void 0:l.message))je(!0);else{var t,a;je(!1);const l=null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(a=t.response)||void 0===a?void 0:a.data;R(l),we(null===l||void 0===l?void 0:l.cdr_list),z(""),he(null===l||void 0===l?void 0:l.timezone)}}))}),[V,ue,W,F,y,f,se,de]);const fe=e=>"number"===typeof e?e:/^\d+$/.test(e)?parseInt(e,10):0,Ne=e=>{if(!pe)return;let l=G;$!==e&&(l=!0);const t=[...pe].sort(((t,a)=>{if("duration"===e){const l=fe(t[e]),s=fe(a[e]);return G?l-s:s-l}{const s=t[e],n=a[e],i=String(s),r=String(n);return l?i.localeCompare(r):r.localeCompare(i)}}));z(e),O(!l),we(t)},_e=e=>{const l=e.target.value;l.trim()?(B(l),U(1)):B("")};let Ce=(F-1)*W+1;0===(null===L||void 0===L?void 0:L.total_record)&&(Ce=0);let Se=F*W;Se>(null===L||void 0===L?void 0:L.total_record)&&(Se=null===L||void 0===L?void 0:L.total_record);const Ae=e=>{e.preventDefault();const l=e.clipboardData.getData("text/plain");l.startsWith(" ")||B(l.trim())},ke=e=>(0,_.jsxs)("div",{children:[(0,_.jsx)(h.h,{width:10,height:20,style:{filter:$===e&&G?"opacity(0.5)":""}}),(0,_.jsx)(m.h,{width:10,height:20,style:{filter:$!==e||G?"":"opacity(0.5)",marginLeft:"-4px"}})]}),De=(e,l)=>{(e=>{const{name:l,value:t}=e.target;oe(t)})({target:{name:e,value:l}}),re(null)},Ie=()=>(0,_.jsxs)("div",{children:[(0,_.jsxs)(r.A.Group,{className:"form-groups ",children:[(0,_.jsx)(r.A.Group,{className:"ml-2 mb-0",children:(0,_.jsxs)("div",{className:"show",children:[(0,_.jsx)("h6",{children:I("Show")}),(0,_.jsx)("div",{className:"select_entry",children:(0,_.jsxs)(r.A.Select,{"aria-label":"Default select example",onChange:e=>(M(e.target.value),U(1)),value:W,children:[(0,_.jsx)("option",{value:"10",children:"10"}),(0,_.jsx)("option",{value:"25",children:"25"}),(0,_.jsx)("option",{value:"50",children:"50"}),(0,_.jsx)("option",{value:"100",children:"100"})]})}),(0,_.jsx)("h6",{children:I("entries")})]})}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center"},className:"formdasboard",children:[(0,_.jsxs)("div",{className:"internal-call-modal-head d-flex justify-content-around",style:{width:"140%",marginRight:"20px"},children:[I("Hide internal calls"),(0,_.jsxs)("label",{className:"internal-call-switch",style:{marginLeft:"8px"},children:[(0,_.jsx)("input",{type:"checkbox",checked:ue,onChange:be}),(0,_.jsx)("span",{className:"internal-call-slider"})]})]}),(0,_.jsxs)("h6",{style:{fontWeight:"400"},children:[I("Category"),":"]}),(0,_.jsx)("div",{className:"ml-2",style:{width:"auto"},children:(0,_.jsx)(k.A,{toggleDropdown:me,showValue:de,openDropdown:ie,valueArray:A.b7,handleSelection:De,name:"Direction",defaultValue:I("All"),mapValue:"name",storeValue:"value",setOpenDropdown:re})}),(0,_.jsxs)("h6",{style:{fontWeight:"400"},className:"ml-2",children:[I("Search"),":"]}),"\xa0\xa0\xa0",(0,_.jsx)(r.A.Control,{type:"text",className:"new-daata search-bg",onChange:_e,value:V,onPaste:Ae})]})]}),(0,_.jsx)("div",{className:"table-container",style:{overflowY:"auto"},children:(0,_.jsxs)(d.A,{className:"table-new border-space",children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{className:"table-new d-flex ",children:[(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",onClick:()=>Ne("start_stamp"),style:{width:"21%"},children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,_.jsx)("p",{className:"mb-0",children:I("Date")}),ke("start_stamp")]})}),(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",onClick:()=>Ne("caller_id_number"),style:{width:"13.25%"},children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,_.jsx)("p",{className:"mb-0",children:I("Caller ID")}),ke("caller_id_number")]})}),(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",onClick:()=>Ne("caller_id_name"),style:{width:"14.28%"},children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,_.jsx)("p",{className:"mb-0",children:I("Caller Name")}),ke("caller_id_name")]})}),(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",onClick:()=>Ne("destination_number"),style:{width:"14.28%"},children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,_.jsx)("p",{className:"mb-0",children:I("Endpoint")}),ke("destination_number")]})}),(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",onClick:()=>Ne("duration"),style:{width:"14.28%"},children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,_.jsx)("p",{className:"mb-0",children:I("Duration")}),ke("duration")]})}),(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",onClick:()=>Ne("direction"),style:{width:"14.28%"},children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,_.jsx)("p",{className:"mb-0",children:I("Call Type")}),ke("direction")]})}),(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",onClick:()=>Ne("status"),style:{width:"14.28%"},children:(0,_.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,_.jsx)("p",{className:"mb-0",children:I("Call Status")}),ke("status")]})}),(0,_.jsx)("th",{className:"table-new table-custom-body-td m-0",style:{width:"10%",fontWeight:"700"},children:I("Record")})]})}),(0,_.jsx)("tbody",{style:{overflowY:"auto",maxHeight:"250px",display:"block",width:"100%"},className:"dashboardtablescroll",children:ge?(0,_.jsxs)("div",{className:"dashtableloading",style:{height:"250px"},children:[" ",(0,_.jsx)(S.A,{})]}):(0,_.jsx)(_.Fragment,{children:pe&&pe.length>0?(0,_.jsx)(_.Fragment,{children:pe.map(((e,l)=>{console.log("dashboard",pe);const t=(a=null===e||void 0===e?void 0:e.duration,`${String(Math.floor(a/3600)).padStart(2,"0")}:${String(Math.floor(a/60)%60).padStart(2,"0")}:${String(a%60).padStart(2,"0")}`);var a;const s=new Date(null===e||void 0===e?void 0:e.start_stamp);console.log("date",s);const n=D.A.dateDisplay(s);return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("tr",{className:"table-new new-data-table",style:{marginBottom:"3px !important"},children:[(0,_.jsxs)("td",{className:"table-new table-custom-body-td",style:{width:"21%",display:"flex",alignItems:"center"},children:[n," ",(i=null===e||void 0===e?void 0:e.start_stamp,new Date(i).toLocaleTimeString(r,{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:ce,hourCycle:"h24"}))]}),(0,_.jsx)("td",{className:"table-new table-custom-body-td",style:{width:"13%",display:"flex",alignItems:"center"},children:(0,_.jsx)("div",{className:"overflowdashboaard",children:"answered"==e.status&&"b"==e.leg?e.source_number:e.caller_id_number})}),(0,_.jsx)("td",{className:"table-new table-custom-body-td table-caller",style:{width:"14.28%",display:"flex",alignItems:"center"},children:(0,_.jsx)("div",{className:"overflowdashboaard",children:e.caller_id_name})}),(0,_.jsx)("td",{className:"table-new table-custom-body-td",style:{width:"14.28%",display:"flex",alignItems:"center"},children:(0,_.jsx)("div",{className:"overflowdashboaard",children:e.destination_number})}),(0,_.jsx)("td",{className:"table-new table-custom-body-td",style:{width:"14.28%",display:"flex",alignItems:"center"},children:(0,_.jsxs)("div",{className:"overflowdashboaard",children:[void 0==e.duration?"00:00:00":t," "]})}),(0,_.jsx)("td",{className:"table-new table-custom-body-td",style:{width:"14.28%",display:"flex",alignItems:"center"},children:(0,_.jsx)("div",{className:"overflowdashboaard",children:"local"==I(e.direction)?I("internal"):I(null===e||void 0===e?void 0:e.direction)})}),(0,_.jsx)("td",{className:"table-new table-custom-body-td",style:{width:"14.28%",display:"flex",alignItems:"center"},children:(0,_.jsx)("div",{className:"overflowdashboaard",children:I(null===e||void 0===e?void 0:e.status)!=I("answered")?I("missed"):I("answered")})}),(0,_.jsx)("td",{className:"table_edit2dash table-new table-custom-body-td",style:{width:"9%"},children:(0,_.jsx)("button",{disabled:!e.recording_url,style:{backgroundColor:e.recording_url?"var(--main-orange-color)":"var(--main-forgot-color)",border:"none",opacity:e.recording_url?"":"0.5"},onClick:()=>{(e=>{const l=new Date(null===e||void 0===e?void 0:e.start_stamp).toLocaleString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});X(!0),q(null===e||void 0===e?void 0:e.recording_url),Q(null===e||void 0===e?void 0:e.caller_id_number),le(null===e||void 0===e?void 0:e.caller_id_name),ae(l)})(e)},children:(0,_.jsx)(b,{width:14,height:14,className:"edithoverdash"})})})]},l)});var i,r}))}):(0,_.jsx)("div",{className:"dashtableloading",style:{height:"250px"},children:I("No data available in table")})})})]})}),(0,_.jsxs)("div",{className:"show show2 mt-2 mb-2 d-flex align-items-center justify-content-between",children:[(0,_.jsxs)("h6",{children:[I("Showing")," ",Ce," ",I("to")," ",Se," ",I("of")," ",null===L||void 0===L?void 0:L.total_record," ",I("entries")]}),(0,_.jsx)("div",{children:(0,_.jsx)(g.A,{totalPages:null===L||void 0===L?void 0:L.total_page,currentPage:F,setcurrenPage:U})})]})]});return(0,_.jsxs)("div",{className:"col-md-12 col-name p-0",children:[(0,_.jsxs)("div",{className:"card mb-4",children:[(0,_.jsx)("div",{className:"call_metrics",children:(0,_.jsx)("h2",{children:I("Call details")})}),(0,_.jsxs)(o.A.Container,{activeKey:l,onSelect:n,children:[(0,_.jsxs)(c.A,{variant:"tabs",className:"nav-tabs3",children:[(0,_.jsx)(c.A.Item,{children:(0,_.jsx)(c.A.Link,{eventKey:"logs",className:"nav-link2",children:I("Call logs all")})}),(0,_.jsx)(c.A.Item,{children:(0,_.jsx)(c.A.Link,{eventKey:"logsgroup",className:"nav-link2",children:I("Call logs ring group")})}),(0,_.jsx)(c.A.Item,{children:(0,_.jsx)(c.A.Link,{eventKey:"logsextension",className:"nav-link2",children:I("Call logs extension")})})]}),(0,_.jsxs)(o.A.Content,{className:"mt-2",children:[(0,_.jsx)(o.A.Pane,{eventKey:"logs",children:(0,_.jsx)("div",{children:Ie()})}),(0,_.jsx)(o.A.Pane,{eventKey:"logsgroup",children:(0,_.jsx)("div",{children:Ie()})}),(0,_.jsx)(o.A.Pane,{eventKey:"logsextension",children:(0,_.jsx)("div",{children:Ie()})})]})]})]}),Y&&(0,_.jsx)(C,{show:Y,onHide:()=>{X(!1),q("")},recordingUrl:Z,callerid:J,callername:ee,createdat:te})]})}}}]);
//# sourceMappingURL=201.d9887a6a.chunk.js.map